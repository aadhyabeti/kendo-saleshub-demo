@using Kendo.Mvc.UI
@using SalesHub.Client.ViewModels.Api;

@model SalesHub.Client.ViewModels.Client.OrderViewModel
@{
    ViewBag.Title = "Edit Order";
}

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    @Html.Partial("_Order")

    <div class="units-aggregate">
        Units: <span id="unitsAggregate">0</span>
        Total Weight: <span id="totalWeightAggregate">0.00</span>
        Total Amount: <span id="totalAmountAggregate">0.00</span>
    </div>
}

@using (Html.BeginForm("Delete", "Order", new { id = Model.OrderId }, FormMethod.Post, new { id = "deleteForm" }))
{
}

@section scripts
{
    <script type="text/x-kendo-template" id="orderDetailsValidationMessageTemplate">
        # if (messages.length) { #
            <li>#=field#
                <ul>
                    # for (var i = 0; i < messages.length; ++i) { #
                        <li>#= messages[i] #</li>
                    # } #
                </ul>
            </li>
        # } #
    </script>
    <script>
        window.SalesHub.customerData = {
            customerId: "@Model.CustomerId",
            customerPath: "@Html.Raw(Model.CustomerPath)"
        };
    </script>
    <script src="@Url.Content("~/Scripts/order.js")"></script>
    @Html.Kendo().DeferredScripts()
}
